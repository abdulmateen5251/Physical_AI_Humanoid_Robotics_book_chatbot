# ========================================
# EMBEDDED RAG CHATBOT - ENVIRONMENT CONFIG
# ========================================
# Copy this file to .env and fill in your credentials

# ========================================
# OPENAI CONFIGURATION
# ========================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-your_openai_api_key_here

# Model for chat/generation (gpt-4o-mini recommended for cost)
OPENAI_MODEL=gpt-4o-mini

# Model for embeddings
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# ========================================
# QDRANT CLOUD CONFIGURATION
# ========================================
# Sign up at: https://qdrant.io (Free Tier available)
# Get your cluster URL and API key from Qdrant dashboard

# Your Qdrant Cloud URL (e.g., https://xxxxxx-xxxxx.qdrant.io)
QDRANT_URL=https://your-qdrant-instance.qdrant.io

# Your Qdrant API Key (starts with ey...)
QDRANT_API_KEY=ey_your_qdrant_api_key_here

# Collection name for book chunks (created automatically if not exists)
QDRANT_COLLECTION=book_chunks

# ========================================
# NEON POSTGRES CONFIGURATION
# ========================================
# Sign up at: https://neon.tech (Free Tier: 3 projects, unlimited databases)
# Create a new project and copy the connection string

# PostgreSQL connection string from Neon
# Format: postgresql://user:password@host/database
# Example: postgresql://neon_user:neon_pass@ep-xxx-xxxxx.us-east-1.neon.tech/book_rag_db
DATABASE_URL=postgresql://user:password@host/database

# ========================================
# RETRIEVAL CONFIGURATION
# ========================================
# Number of top chunks to retrieve per query
TOP_K=5

# Minimum similarity score (0-1) for chunk relevance
SCORE_THRESHOLD=0.7

# Size of text chunks (characters)
CHUNK_SIZE=500

# Overlap between consecutive chunks (characters)
CHUNK_OVERLAP=50

# ========================================
# RATE LIMITING
# ========================================
# Max chat requests per user per minute
RATE_LIMIT_PER_MINUTE=10

# ========================================
# APPLICATION CONFIGURATION
# ========================================
# Environment: development, staging, production
ENVIRONMENT=development

# ========================================
# SETUP INSTRUCTIONS
# ========================================
# 1. OpenAI API Key:
#    - Go to https://platform.openai.com/api-keys
#    - Create new secret key
#    - Copy and paste here
#
# 2. Qdrant Cloud Setup:
#    - Go to https://cloud.qdrant.io
#    - Create free account
#    - Create new cluster
#    - Copy URL and API key
#
# 3. Neon Postgres Setup:
#    - Go to https://console.neon.tech
#    - Create new project
#    - Copy connection string
#    - Format: postgresql://[user]:[password]@[host]/[database]
#
# 4. Create .env file:
#    cp .env.example .env
#    # Then edit .env and fill in your credentials
#
# 5. Install dependencies:
#    pip install -r requirements.txt
#
# 6. Ingest book:
#    python scripts/ingest_book.py
#
# 7. Run backend:
#    uvicorn app.main:app --reload --port 8000
